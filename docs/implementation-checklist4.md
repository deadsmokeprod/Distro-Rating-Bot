# –ß–µ–∫-–ª–∏—Å—Ç –≤–Ω–µ–¥—Ä–µ–Ω–∏—è Stage 4

–ò—Å—Ç–æ—á–Ω–∏–∫ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π:
- `docs/new-stack-original-2026-02-18.md` (–æ—Ä–∏–≥–∏–Ω–∞–ª)
- `docs/business-requirements-2026-02-18-stage4.md` (–Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ BR)
- `docs/stage4-analysis-and-applicability-2026-02-18.md` (–∞–Ω–∞–ª–∏–∑ –∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ—Å—Ç—å)

–ü—Ä–∞–≤–∏–ª–æ –≤–µ–¥–µ–Ω–∏—è:
- –ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—É–Ω–∫—Ç–∞: `[x]` + –∫—Ä–∞—Ç–∫–æ "—á—Ç–æ —Å–¥–µ–ª–∞–Ω–æ" + —Å—Å—ã–ª–∫–∞ –Ω–∞ –∫–æ–¥ (`path + symbol`) + –ø—Ä–æ–≤–µ—Ä–∫–∞.
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ/—Ä—É—á–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è.

---

## –°–∫–≤–æ–∑–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- [ ] RBAC –∏ tenant isolation –Ω–µ –æ—Å–ª–∞–±–ª—è—é—Ç—Å—è.
  - –ö–æ–¥: `app/handlers/manager.py`, `app/handlers/seller.py`, `app/db/sqlite.py`.
- [ ] –í—Å–µ –Ω–æ–≤—ã–µ FSM/callback —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∑–∞—â–∏—â–µ–Ω—ã –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö –Ω–∞–∂–∞—Ç–∏–π/—É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.
  - –ö–æ–¥: `app/handlers/start.py`, `app/handlers/seller.py`, `app/handlers/manager.py`.
- [ ] –ù–µ –ª–æ–º–∞–µ—Ç—Å—è private-only —Ä–µ–∂–∏–º.
  - –ö–æ–¥: `app/handlers/filters.py`, router filters.
- [ ] –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ª–æ–≥–∏ –∏ –∞—É–¥–∏—Ç –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π.
  - –ö–æ–¥: `app/services/*`, `bot.py`, `sqlite.log_audit`.

---

## –≠—Ç–∞–ø 0. Baseline Stage 4 –∏ —Ç–µ—Å—Ç-–∫–æ–Ω—Ç—É—Ä

- [ ] –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å baseline —Ç–µ–∫—É—â–∏—Ö —Ä–∞—Å—Å—ã–ª–æ–∫, helper-–º–µ–Ω—é, —Å–ø–æ—Ä–æ–≤, —Ñ–∏–∫—Å–∞—Ü–∏–∏ –ø—Ä–æ–¥–∞–∂.
  - –î–æ–∫: `docs/stage4-analysis-and-applicability-2026-02-18.md`.
- [ ] –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Ç–µ—Å—Ç-–º–∞—Ç—Ä–∏—Ü—É Stage 4 (happy/negative/security/resilience).
- [ ] –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø–ª–∞–Ω –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ rollout –¥–ª—è BR-12 (grouping).

---

## –≠—Ç–∞–ø 1. BR-07 –†–∞—Å—Å—ã–ª–∫–∏ 2.0

- [x] –†–∞—Å—Å—ã–ª–∫–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–µ —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç, –Ω–æ –∏ –¥–æ—Å—Ç—É–ø–Ω—ã–µ media/content —Ç–∏–ø—ã.
  - –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: —à–∞–≥ –≤–≤–æ–¥–∞ —Ä–∞—Å—Å—ã–ª–∫–∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `text/photo/video/voice/video_note/document/animation/sticker/audio/contact/location/venue`; –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `copy_message`.
  - –ö–æ–¥: `app/handlers/manager.py` (`manager_broadcast_message`, `manager_broadcast_send`, `_broadcast_content_preview`).
- [x] –†–µ–∂–∏–º "–†–∞—Å—Å—ã–ª–∫–∞ –≤—Å–µ–º" –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –¥–ª—è admin.
  - –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: –ø—É–Ω–∫—Ç "–í—Å–µ–º –ø—Ä–æ–¥–∞–≤—Ü–∞–º" –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ admin; server-side –∑–∞–ø—Ä–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –≤—ã–±–æ—Ä–µ —Ç–∞—Ä–≥–µ—Ç–∞ –∏ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π.
  - –ö–æ–¥: `app/keyboards/manager.py` (`manager_broadcast_target_menu`), `app/handlers/manager.py` (`manager_broadcast_target`, `manager_broadcast_send`).
- [x] "–ü–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–æ–º–ø–∞–Ω–∏–∏": manager –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ org, admin - –≤—Å–µ.
  - –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ç–µ–∫—É—â–∞—è –ª–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ org —á–µ—Ä–µ–∑ `_send_broadcast_org_list` + `_can_access_org`.
  - –ö–æ–¥: `app/handlers/manager.py` (`_send_broadcast_org_list`, `manager_broadcast_org_pick`, `manager_broadcast_send`).
- [x] –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏ —Ä–∞—Å—à–∏—Ä–∏—Ç—å –∞—É–¥–∏—Ç —Ä–∞—Å—Å—ã–ª–∫–∏ (—Ç–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞, target mode, org, recipients, sent).
  - –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: –≤ –∞—É–¥–∏—Ç –¥–æ–±–∞–≤–ª–µ–Ω `content_type`, —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã `target`, `org` (–¥–ª—è —Ä–µ–∂–∏–º–∞ org), `recipients`, `sent`.
  - –ö–æ–¥: `app/handlers/manager.py` (`manager_broadcast_send`), `app/db/sqlite.py` (`log_audit` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π).
  - –ü—Ä–æ–≤–µ—Ä–∫–∞: `python -m compileall app/handlers/manager.py app/keyboards/manager.py`, ReadLints –±–µ–∑ –æ—à–∏–±–æ–∫.

---

## –≠—Ç–∞–ø 2. BR-08 –°–∫—Ä–∏–∂–∞–ª–∏ –∏ —Å–≤—è–∑—å —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º

- [x] –î–æ–±–∞–≤–∏—Ç—å –º–µ–Ω—é "–°–∫—Ä–∏–∂–∞–ª–∏ –ø—Ä–æ–¥–∞–≤—Ü–∞" –∏ –ø—É–Ω–∫—Ç "–°–∫—Ä–∏–∂–∞–ª–∏ –≤ –ø–æ–º–æ—â—å".
  - –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: –≤ main menu –¥–æ–±–∞–≤–ª–µ–Ω –≤—Ö–æ–¥ –≤ `–°–∫—Ä–∏–∂–∞–ª–∏ –ø—Ä–æ–¥–∞–≤—Ü–∞`; —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Ä–∞–∑–¥–µ–ª —Å –±–∞–∑–æ–≤—ã–º–∏ —Å–æ–≤–µ—Ç–∞–º–∏ –ø–æ —Ä–æ—Å—Ç—É –º–µ–¥–∫–æ–∏–Ω–æ–≤.
  - –ö–æ–¥: `app/keyboards/seller.py` (`SELLER_MENU_SCROLLS`, `seller_scrolls_menu`), `app/handlers/seller.py` (`seller_scrolls`, `seller_scrolls_help`).
- [x] –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ "–ü—Ä–∞–≤–∏–ª–∞ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏" –≤ "–°–∫—Ä–∏–∂–∞–ª–∏".
  - –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: –∫–Ω–æ–ø–∫–∞ `SELLER_MENU_RULES` –æ—Å—Ç–∞–≤–ª–µ–Ω–∞ –≤ `seller_scrolls_menu`; –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –º–µ–Ω—é —Ä–∞–∑–¥–µ–ª –ø—Ä–∞–≤–∏–ª –±–æ–ª—å—à–µ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é.
  - –ö–æ–¥: `app/keyboards/seller.py`, `app/handlers/seller.py` (`seller_rules`).
- [x] –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å "–ü–æ–º–æ—â—å" –≤ "–ü–æ–º–æ—â—å —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º" –∏ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤ "–°–∫—Ä–∏–∂–∞–ª–∏".
  - –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ `üß© –ü–æ–º–æ—â—å —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º`; –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ–±–Ω–æ–≤–ª–µ–Ω, —Å—Ç–∞—Ä—ã–π `‚ÑπÔ∏è –ü–æ–º–æ—â—å` —Å–æ—Ö—Ä–∞–Ω–µ–Ω –∫–∞–∫ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π alias.
  - –ö–æ–¥: `app/keyboards/seller.py` (`SELLER_SCROLLS_APP_HELP`), `app/handlers/seller.py` (`seller_help`).
- [x] –î–æ–±–∞–≤–∏—Ç—å "–ü–æ–º–æ—â—å –≤ –ø—Ä–æ–¥–∞–∂–∞—Ö" + "–°–≤—è–∑–∞—Ç—å—Å—è —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º".
  - –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: –¥–æ–±–∞–≤–ª–µ–Ω —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ä–∞–∑–¥–µ–ª –ø–æ–º–æ—â–∏ –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º —Å inline-–∫–Ω–æ–ø–∫–æ–π –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –º–µ–Ω–µ–¥–∂–µ—Ä—É.
  - –ö–æ–¥: `app/handlers/seller.py` (`seller_scrolls_sales_help`), `app/keyboards/common.py` (`manager_help_inline_keyboard`, `MANAGER_HELP_CALLBACK`).
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å manager-help –æ–±—Ä–∞—â–µ–Ω–∏–µ —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç —Å–ø–∞–º–∞/–¥—É–±–ª–∏–∫–∞—Ç–æ–≤.
  - –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: –æ—Ç–¥–µ–ª—å–Ω—ã–π FSM flow –¥–ª—è –æ–±—Ä–∞—â–µ–Ω–∏—è –º–µ–Ω–µ–¥–∂–µ—Ä—É —Å token-–≤–∞–ª–∏–¥–∞—Ü–∏–µ–π, —Ç–∞–π–º–µ—Ä–æ–º –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π, stale callback guard –∏ –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ –º–µ–Ω–µ–¥–∂–µ—Ä—É –∫–æ–º–ø–∞–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
  - –ö–æ–¥: `app/handlers/start.py` (`ManagerHelpRequestStates`, `manager_help_request_callback`, `manager_help_collect_text`, `manager_help_send`, `manager_help_stale`), `app/keyboards/common.py` (`manager_help_confirm_keyboard`).
  - –ü—Ä–æ–≤–µ—Ä–∫–∞: `python -m compileall app/handlers/seller.py app/handlers/start.py app/keyboards/seller.py app/keyboards/common.py`, ReadLints –±–µ–∑ –æ—à–∏–±–æ–∫.

---

## –≠—Ç–∞–ø 3. BR-09 –¢–∞–π–º–µ—Ä—ã –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è -> cooldown –∞–Ω—Ç–∏—Å–ø–∞–º

- [x] –£–¥–∞–ª–∏—Ç—å delay timers –æ–∂–∏–¥–∞–Ω–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–ª—è dispute/merge.
  - –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: —É–±—Ä–∞–Ω–æ –æ–∂–∏–¥–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ —Ñ–∏–Ω–∞–ª—å–Ω—ã–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º —Å–ø–æ—Ä–∞ –∏ —Å–ª–∏—è–Ω–∏—è; –≤—Ç–æ—Ä–æ–π —à–∞–≥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–µ–Ω —Å—Ä–∞–∑—É.
  - –ö–æ–¥: `app/handlers/seller.py` (`seller_dispute_wait_confirm`), `app/handlers/manager.py` (`manager_merge_wait`).
- [x] –°–æ—Ö—Ä–∞–Ω–∏—Ç—å 2-step confirm –±–µ–∑ –æ–∂–∏–¥–∞–Ω–∏—è.
  - –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: –¥–≤—É—Ö—ç—Ç–∞–ø–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ; –∏–∑–º–µ–Ω–µ–Ω–∞ —Ç–æ–ª—å–∫–æ –ª–æ–≥–∏–∫–∞ —Å–Ω—è—Ç–∏—è —Ç–∞–π–º–µ—Ä–∞.
  - –ö–æ–¥: `app/handlers/seller.py` (`_dispute_confirm_step1_keyboard`, `_dispute_confirm_step2_keyboard`), `app/handlers/manager.py` (`_merge_confirm_step1_keyboard`, `_merge_confirm_step2_keyboard`).
- [x] –î–æ–±–∞–≤–∏—Ç—å cooldown –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è —Å–ø–æ—Ä–æ–≤/—Å–ª–∏—è–Ω–∏—è/–∫—Ä–∏—Ç–∏—á–Ω—ã—Ö submit.
  - –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: –¥–æ–±–∞–≤–ª–µ–Ω—ã action-level cooldown –∫–ª—é—á–∏ –Ω–∞ –æ—Ç–∫—Ä—ã—Ç–∏–µ —Å–ø–æ—Ä–∞ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–ª–∏—è–Ω–∏—è, –æ–±—â–∏–π burst-limit –∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–π cooldown –º–µ–∂–¥—É –Ω–æ–≤—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
  - –ö–æ–¥: `app/handlers/seller.py` (`seller_dispute_confirm`), `app/handlers/manager.py` (`manager_merge_execute`), `app/utils/rate_limit.py`, `app/config.py`.
- [x] –î–æ–±–∞–≤–∏—Ç—å cooldown –Ω–∞ —Ñ–∏–∫—Å–∞—Ü–∏—é –ø—Ä–æ–¥–∞–∂.
  - –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: –¥–æ–±–∞–≤–ª–µ–Ω cooldown –Ω–∞ `sale_confirm` (burst + action-level –ø–æ `turnover_id`) –∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–π cooldown –º–µ–∂–¥—É –Ω–æ–≤—ã–º–∏ —Ñ–∏–∫—Å–∞—Ü–∏—è–º–∏.
  - –ö–æ–¥: `app/handlers/seller.py` (`seller_sales_confirm`), `app/utils/rate_limit.py`, `app/config.py`.
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –ø–æ–∫—Ä—ã—Ç—å –¥—Ä—É–≥–∏–µ –∑–æ–Ω—ã —Ä–∏—Å–∫–∞ —Å–ø–∞–º–∞ –±–µ–∑ –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π.
  - –û—Å—Ç–∞–ª–æ—Å—å: –∑–∞–≤–µ—Ä—à–∏—Ç—å —Ä–µ–≤–∏–∑–∏—é `support/manager-help` –∏ –ø—Ä–æ—á–∏—Ö submit-—Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –ø–µ—Ä–µ–≤–æ–¥–∞ —Å timer-–≥–µ–π—Ç–æ–≤ –Ω–∞ cooldown-–ø–æ–¥—Ö–æ–¥ (–≥–¥–µ —ç—Ç–æ —É–º–µ—Å—Ç–Ω–æ –ø–æ UX/BR-08).
  - –ü—Ä–æ–≤–µ—Ä–∫–∞: `python -m compileall app/handlers/seller.py app/handlers/manager.py app/config.py`, ReadLints –±–µ–∑ –æ—à–∏–±–æ–∫.

---

## –≠—Ç–∞–ø 4. BR-10 –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º —Å–ø–æ—Ä–æ–≤

- [x] –ù–∞ approve/reject –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä—É –∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–º—É —É—á–∞—Å—Ç–Ω–∏–∫—É (seller/rop).
  - –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: –ø–æ—Å–ª–µ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ —Å–ø–æ—Ä–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä—É –∏ –≤–ª–∞–¥–µ–ª—å—Ü—É –æ—Å–ø–∞—Ä–∏–≤–∞–µ–º–æ–π —Ñ–∏–∫—Å–∞—Ü–∏–∏ (–æ–¥–∏–Ω —Ä–∞–∑ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è).
  - –ö–æ–¥: `app/handlers/seller.py` (`seller_dispute_mod_approve`, `seller_dispute_mod_reject`, `_notify_dispute_resolution_participants`).
- [x] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã –≤–∫–ª—é—á–∞—Ç—å –ø–æ–Ω—è—Ç–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç (–∫—Ç–æ, –∫–∞–∫–æ–π —Å–ø–æ—Ä, —Ä–µ–∑—É–ª—å—Ç–∞—Ç).
  - –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç `dispute_id`, —Å—Ç–∞—Ç—É—Å (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω/–æ—Ç–∫–ª–æ–Ω–µ–Ω), –∫—Ç–æ –ø—Ä–∏–Ω—è–ª —Ä–µ—à–µ–Ω–∏–µ, –ø–µ—Ä–∏–æ–¥, –ø–æ–∫—É–ø–∞—Ç–µ–ª—è, –æ–±—ä–µ–º –∏ –∏—Ç–æ–≥–æ–≤–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –ø–æ –ø—Ä–æ–¥–∞–∂–µ.
  - –ö–æ–¥: `app/handlers/seller.py` (`_dispute_resolution_push_text`, `_person_label`).
- [x] –ó–∞—â–∏—Ç–∏—Ç—å—Å—è –æ—Ç –¥—É–±–ª–µ–π —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.
  - –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: –¥–æ–±–∞–≤–ª–µ–Ω dedupe-guard –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Å–ø–æ—Ä–∞ –ø–æ –∫–ª—é—á—É `(dispute_id, status, recipient)` —á–µ—Ä–µ–∑ rate-limit –æ–∫–Ω–æ.
  - –ö–æ–¥: `app/handlers/seller.py` (`_notify_dispute_resolution_participants`), `app/utils/rate_limit.py`.
  - –ü—Ä–æ–≤–µ—Ä–∫–∞: `python -m compileall app/handlers/seller.py`, ReadLints –±–µ–∑ –æ—à–∏–±–æ–∫.

---

## –≠—Ç–∞–ø 5. BR-11 –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (ID + –§–ò–û)

- [x] –†–µ–≤–∏–∑–∏—è –≤—Å–µ—Ö —ç–∫—Ä–∞–Ω–æ–≤/inline-—Å–ø–∏—Å–∫–æ–≤, –≥–¥–µ —Ñ–∏–≥—É—Ä–∏—Ä—É—é—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏.
  - –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: –ø—Ä–æ–≤–µ–¥–µ–Ω–∞ —Ä–µ–≤–∏–∑–∏—è user-facing —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –≤ —Å–ø–æ—Ä–∞—Ö, –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –∏ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö/–ø—Ä–æ—Ñ–∏–ª—è—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤; –≤—ã–±–æ—Ä–∫–∏ –∏–∑ –ë–î —É–∂–µ –æ—Ç–¥–∞—é—Ç `initiator_full_name/claimed_by_full_name`.
  - –ö–æ–¥: `app/handlers/seller.py`, `app/handlers/manager.py`, `app/db/sqlite.py` (`get_dispute_by_id`, `list_open_disputes_*`).
- [x] –í –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö –∑–∞–º–µ–Ω–∏—Ç—å "—Ç–æ–ª—å–∫–æ ID" –Ω–∞ "–§–ò–û + ID".
  - –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: –∫–∞—Ä—Ç–æ—á–∫–∏ —Å–ø–æ—Ä–∞, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ —Ä–µ—à–µ–Ω–∏—è–º —Å–ø–æ—Ä–∞, –ø—Ä–æ—Ñ–∏–ª—å –ø—Ä–æ–¥–∞–≤—Ü–∞, –ø—Ä–æ—Ñ–∏–ª—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ —É –†–û–ü –∏ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ `–§–ò–û + ID`.
  - –ö–æ–¥: `app/handlers/seller.py` (`_dispute_details_text`, `_dispute_resolution_push_text`, `seller_profile`, `seller_my_staff_open`, `seller_my_staff_export`), `app/handlers/manager.py` (`manager_staff_profile`, `manager_goals_avg_create_submit`).
- [x] –î–æ–±–∞–≤–∏—Ç—å fallback –¥–ª—è –ø—É—Å—Ç–æ–≥–æ –§–ò–û.
  - –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω fallback —á–µ—Ä–µ–∑ helper `ID N` –ø—Ä–∏ –ø—É—Å—Ç–æ–º `full_name`.
  - –ö–æ–¥: `app/handlers/seller.py` (`_person_label`), `app/handlers/manager.py` (`_person_label`).
  - –ü—Ä–æ–≤–µ—Ä–∫–∞: `python -m compileall app/handlers/seller.py app/handlers/manager.py`, ReadLints –±–µ–∑ –æ—à–∏–±–æ–∫.

---

## –≠—Ç–∞–ø 6. BR-12 –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ–¥–∞–∂ –ø–æ `(–¥–∞—Ç–∞, –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç)` (–¥–ª—è —á—Ç–æ –±—ã  –Ω–µ–¥–µ–ª–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é, –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å —É–∂–µ —Å–æ–∑–¥–∞–Ω–Ω—É—é –ë–î –∏ —Å–æ–∑–¥–∞—Ç—å –∑–∞–Ω–æ–≤–æ —á—Ç–æ –±—ã –æ–Ω–∞ –±—ã–ª–∞ –±–µ–∑ –¥–∞–Ω–Ω—ã—Ö)

- [x] –°–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ö–µ–º—É –ë–î –¥–ª—è –≥—Ä—É–ø–ø—ã –ø—Ä–æ–¥–∞–∂ (group key/number/marker).
  - –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ –≤—ã–±–æ—Ä–æ–∫ –ø–æ –∫–ª—é—á—É `substr(period,1,10)+buyer_inn`; –¥–ª—è –≥—Ä—É–ø–ø–æ–≤—ã—Ö —Å–ø–æ—Ä–æ–≤ –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å–≤—è–∑—É—é—â–∞—è —Ç–∞–±–ª–∏—Ü–∞ `sale_dispute_claims` –∏ –∏–Ω–¥–µ–∫—Å—ã.
  - –ö–æ–¥: `app/db/sqlite.py` (`count/list_*_groups_*`, `sale_dispute_claims`, –∏–Ω–¥–µ–∫—Å—ã).
- [x] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å read-only –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫—É –≤ —Å–ø–∏—Å–∫–∞—Ö —Ñ–∏–∫—Å–∞—Ü–∏–∏/—Å–ø–æ—Ä–æ–≤.
  - –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: —Å–ø–∏—Å–æ–∫ —Ñ–∏–∫—Å–∞—Ü–∏–∏ –∏ —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ø–æ—Ä–æ–≤ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –≥—Ä—É–ø–ø—ã –≤–º–µ—Å—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å—Ç—Ä–æ–∫ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã.
  - –ö–æ–¥: `app/handlers/seller.py` (`_render_sales_list`, `_render_available_disputes`, `*_group*_button_text`), `app/db/sqlite.py`.
- [x] –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É –≥—Ä—É–ø–ø—ã —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π –ø–æ –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–µ.
  - –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: –ø—Ä–∏ –≤—ã–±–æ—Ä–µ –≥—Ä—É–ø–ø—ã –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–∞—Ä—Ç–æ—á–∫–∞ —Å —Å–æ—Å—Ç–∞–≤–æ–º –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä—ã, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –ø–æ–∑–∏—Ü–∏–π –∏ —Å—É–º–º–∞—Ä–Ω—ã–º –æ–±—ä–µ–º–æ–º.
  - –ö–æ–¥: `app/handlers/seller.py` (`seller_sales_pick`, `seller_dispute_pick`), `app/db/sqlite.py` (`list_unclaimed_turnover_rows_by_group`, `list_claimed_sales_in_group_for_dispute`).
- [x] –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ —Ñ–∏–∫—Å–∞—Ü–∏—é –ø—Ä–æ–¥–∞–∂–∏ –Ω–∞ group-level confirm.
  - –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ñ–∏–∫—Å–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞ –≥—Ä—É–ø–ø—É; –≤ –ë–î –∞—Ç–æ–º–∞—Ä–Ω–æ —Å–æ–∑–¥–∞—é—Ç—Å—è `sales_claims` –¥–ª—è –≤—Å–µ—Ö —Å—Ç—Ä–æ–∫ –≥—Ä—É–ø–ø—ã.
  - –ö–æ–¥: `app/handlers/seller.py` (`seller_sales_confirm`), `app/db/sqlite.py` (`claim_turnover_group_by_inns`).
- [x] –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –æ—Å–ø–∞—Ä–∏–≤–∞–Ω–∏–µ –Ω–∞ group-level.
  - –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: –æ—Ç–∫—Ä—ã—Ç–∏–µ —Å–ø–æ—Ä–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞ –≥—Ä—É–ø–ø—É; –æ–¥–∏–Ω `sale_disputes` —Å–≤—è–∑—ã–≤–∞–µ—Ç—Å—è —Å –Ω–∞–±–æ—Ä–æ–º `claim_id` —á–µ—Ä–µ–∑ `sale_dispute_claims`.
  - –ö–æ–¥: `app/handlers/seller.py` (`seller_dispute_confirm`), `app/db/sqlite.py` (`create_sale_dispute_group`).
- [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –Ω–∞—á–∏—Å–ª–µ–Ω–∏–π/—Å–ø–æ—Ä–æ–≤ –ø–æ—Å–ª–µ –ø–µ—Ä–µ—Ö–æ–¥–∞.
  - –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: resolve/cancel —Å–ø–æ—Ä–∞ –æ–±–Ω–æ–≤–ª—è—é—Ç –≤—Å–µ `claim_id` –≥—Ä—É–ø–ø—ã; post-claim —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ü–µ–ª–µ–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ –∫–∞–∂–¥–æ–º—É claim –≥—Ä—É–ø–ø—ã.
  - –ö–æ–¥: `app/db/sqlite.py` (`resolve_dispute`, `cancel_dispute`, `_get_dispute_claim_ids`), `app/handlers/seller.py` (`seller_sales_confirm`).
  - –ü—Ä–æ–≤–µ—Ä–∫–∞: `python -m compileall app/db/sqlite.py app/handlers/seller.py`, ReadLints –±–µ–∑ –æ—à–∏–±–æ–∫; —Ä—É—á–Ω–æ–π e2e –≥—Ä—É–ø–ø–æ–≤—ã—Ö —Å–ø–æ—Ä–æ–≤/–Ω–∞—á–∏—Å–ª–µ–Ω–∏–π –æ—Å—Ç–∞–µ—Ç—Å—è –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é.

---

## –≠—Ç–∞–ø 7. BR-13 –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω –∏ —Å—Ç–∏–ª–∏—Å—Ç–∏–∫–∞ (–¥–æ 30%)

- [x] –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –≥–ª–∞–≤–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞ –≤ –ª–µ–≥–∏–æ–Ω–µ—Ä—Å–∫–æ–π —Å—Ç–∏–ª–∏—Å—Ç–∏–∫–µ.
  - –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: –æ–±–Ω–æ–≤–ª–µ–Ω —Ç–µ–∫—Å—Ç `show_seller_menu` —Å –∫—Ä–∞—Ç–∫–∏–º –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã–º –±–ª–æ–∫–æ–º –≤ —Å—Ç–∏–ª–µ "–ª–µ–≥–∏–æ–Ω/–ª–∞–≥–µ—Ä—å", –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–æ–π —á–∞—Å—Ç–∏ (—á–µ–ª–ª–µ–Ω–¥–∂ + –ª–∏–≥–∞).
  - –ö–æ–¥: `app/handlers/start.py` (`show_seller_menu`).
- [x] –û–±–Ω–æ–≤–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ç–µ–∫—Å—Ç—ã/—ç–º–æ–¥–∑–∏ –≤ —Ä–∞–º–∫–∞—Ö –ª–∏–º–∏—Ç–∞ 30%.
  - –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: —Ç–æ—á–µ—á–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–µ–∫—Å—Ç—ã –≤ —Ä–∞–∑–¥–µ–ª–∞—Ö `–°–∫—Ä–∏–∂–∞–ª–∏`, `–§–∏–Ω–∞–Ω—Å—ã`, `–ê—Ä–µ–Ω–∞ —Å–ø–æ—Ä–æ–≤`, `–ü–æ–º–æ—â—å —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º`; —Å–ª—É–∂–µ–±–Ω—ã–µ/–æ—à–∏–±–æ—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞–ª–∏—Å—å.
  - –ö–æ–¥: `app/handlers/seller.py` (`seller_scrolls`, `_render_finance_menu`, `seller_dispute_menu`, `seller_help`).
- [x] –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–æ–Ω—è—Ç–Ω–æ—Å—Ç—å –∏ –∑–¥—Ä–∞–≤—ã–π —Å–º—ã—Å–ª —Å–ª—É–∂–µ–±–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.
  - –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: –∏–∑–º–µ–Ω–µ–Ω—ã —Ç–æ–ª—å–∫–æ user-facing –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∏ –≤–≤–æ–¥–Ω—ã–µ —Ñ—Ä–∞–∑—ã; —Ñ–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏ critical —Ç–µ–∫—Å—Ç—ã –æ—Å—Ç–∞–≤–ª–µ–Ω—ã –æ–¥–Ω–æ–∑–Ω–∞—á–Ω—ã–º–∏.
  - –ü—Ä–æ–≤–µ—Ä–∫–∞: `python -m compileall app/handlers/start.py app/handlers/seller.py`, ReadLints –±–µ–∑ –æ—à–∏–±–æ–∫.

---

## –≠—Ç–∞–ø 8. –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–∏–µ–º–∫–∞ Stage 4

- [ ] –ü–æ–ª–Ω—ã–π —Ä—É—á–Ω–æ–π e2e –ø–æ —Ä–æ–ª—è–º: ADMIN, MANAGER, ROP, SELLER.
- [x] –†–µ–≥—Ä–µ—Å—Å –¥–µ–π—Å—Ç–≤—É—é—â–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ Stage 3 (–±–µ–∑ –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–π).
  - –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: –≤—ã–ø–æ–ª–Ω–µ–Ω —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π smoke Stage 4 + compileall –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö –º–æ–¥—É–ª–µ–π, –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –∫–ª—é—á–µ–≤—ã–µ –º–∞—Ä–∫–µ—Ä—ã —Ä–∞–Ω–µ–µ –≤–Ω–µ–¥—Ä–µ–Ω–Ω—ã—Ö Stage 3/4 —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤.
  - –ö–æ–¥/–¥–æ–∫: `scripts/stage8_smoke.py`, `docs/stage8-final-acceptance-2026-02-19.md`.
- [ ] –û—Ç–¥–µ–ª—å–Ω—ã–π e2e –ø–æ BR-12 (–≥—Ä—É–ø–ø—ã –ø—Ä–æ–¥–∞–∂, —Ñ–∏–∫—Å–∞—Ü–∏—è, —Å–ø–æ—Ä—ã, –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è).
- [x] –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —É—Ç–µ—á–µ–∫ —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ –ª–æ–≥–∞—Ö.
  - –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: smoke-–ø—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–∞ –Ω–∞ —è–≤–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã/token-like –ø–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–π–¥–µ–Ω–∞.
  - –ö–æ–¥: `scripts/stage8_smoke.py` (`check_no_obvious_secret_leaks_in_log`).
- [x] –û–±–Ω–æ–≤–∏—Ç—å `README.md` / `.env.example` / stage docs.
  - –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: `README.md` –∏ `.env.example` –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –ø–æ Stage 4 –≤ —Ö–æ–¥–µ —ç—Ç–∞–ø–æ–≤; –¥–æ–±–∞–≤–ª–µ–Ω —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –ø—Ä–∏–µ–º–∫–∏ Stage 4.
  - –î–æ–∫: `docs/stage8-final-acceptance-2026-02-19.md`.

---

## –ñ—É—Ä–Ω–∞–ª –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

–§–æ—Ä–º–∞—Ç –∑–∞–ø–∏—Å–∏:
- –î–∞—Ç–∞:
- –≠—Ç–∞–ø/–ø—É–Ω–∫—Ç:
- –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:
- –ö–æ–¥-—Å—Å—ã–ª–∫–∏:
- –ü—Ä–æ–≤–µ—Ä–∫–∞ (—Ä—É—á–Ω–∞—è/–∞–≤—Ç–æ):

- –î–∞—Ç–∞: 2026-02-18
- –≠—Ç–∞–ø/–ø—É–Ω–∫—Ç: –≠—Ç–∞–ø 1 (BR-07) - —Ä–∞—Å—Å—ã–ª–∫–∏ 2.0
- –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞—Å—Å—ã–ª–∫–∏ –º–µ–¥–∏–∞/–∫–æ–Ω—Ç–µ–Ω—Ç–∞ —á–µ—Ä–µ–∑ `copy_message`; —Ä–µ–∂–∏–º "–≤—Å–µ–º" –æ–≥—Ä–∞–Ω–∏—á–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è admin –Ω–∞ UI –∏ server-side; audit —Ä–∞—Å—à–∏—Ä–µ–Ω –ø–æ–ª–µ–º `content_type`.
- –ö–æ–¥-—Å—Å—ã–ª–∫–∏: `app/handlers/manager.py`, `app/keyboards/manager.py`, `docs/implementation-checklist4.md`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ (—Ä—É—á–Ω–∞—è/–∞–≤—Ç–æ): –∞–≤—Ç–æ (`python -m compileall app/handlers/manager.py app/keyboards/manager.py` + lints), —Ä—É—á–Ω–æ–π e2e —Ç–∞—Ä–≥–µ—Ç–∏–Ω–≥–∞/–∫–æ–Ω—Ç–µ–Ω—Ç–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é

- –î–∞—Ç–∞: 2026-02-18
- –≠—Ç–∞–ø/–ø—É–Ω–∫—Ç: –≠—Ç–∞–ø 2 (BR-08) - –°–∫—Ä–∏–∂–∞–ª–∏ –∏ —Å–≤—è–∑—å —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º
- –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: –¥–æ–±–∞–≤–ª–µ–Ω–æ –º–µ–Ω—é `–°–∫—Ä–∏–∂–∞–ª–∏ –ø—Ä–æ–¥–∞–≤—Ü–∞`; –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã `–ü—Ä–∞–≤–∏–ª–∞` –∏ `–ü–æ–º–æ—â—å —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º`; –¥–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª `–ü–æ–º–æ—â—å –≤ –ø—Ä–æ–¥–∞–∂–∞—Ö` –∏ –∑–∞—â–∏—â–µ–Ω–Ω—ã–π flow –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –º–µ–Ω–µ–¥–∂–µ—Ä—É –∫–æ–º–ø–∞–Ω–∏–∏.
- –ö–æ–¥-—Å—Å—ã–ª–∫–∏: `app/keyboards/seller.py`, `app/handlers/seller.py`, `app/keyboards/common.py`, `app/handlers/start.py`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ (—Ä—É—á–Ω–∞—è/–∞–≤—Ç–æ): –∞–≤—Ç–æ (`python -m compileall app/handlers/seller.py app/handlers/start.py app/keyboards/seller.py app/keyboards/common.py` + lints), —Ä—É—á–Ω–æ–π e2e –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –º–µ–Ω–µ–¥–∂–µ—Ä—É –æ—Å—Ç–∞–µ—Ç—Å—è –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é

- –î–∞—Ç–∞: 2026-02-19
- –≠—Ç–∞–ø/–ø—É–Ω–∫—Ç: –≠—Ç–∞–ø 3 (BR-09) - —Å–Ω—è—Ç–∏–µ confirm-delay –∏ cooldown
- –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: —É–±—Ä–∞–Ω—ã delay-—Ç–∞–π–º–µ—Ä—ã —É `dispute/merge` –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ 2-step confirm; –¥–æ–±–∞–≤–ª–µ–Ω—ã cooldown –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ `dispute confirm`, `merge execute` –∏ `sale confirm`; —É–¥–∞–ª–µ–Ω—ã —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ env/config –ø–∞—Ä–∞–º–µ—Ç—Ä—ã delay –¥–ª—è dispute/merge.
- –ö–æ–¥-—Å—Å—ã–ª–∫–∏: `app/handlers/seller.py`, `app/handlers/manager.py`, `app/config.py`, `.env.example`, `README.md`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ (—Ä—É—á–Ω–∞—è/–∞–≤—Ç–æ): –∞–≤—Ç–æ (`python -m compileall app/handlers/seller.py app/handlers/manager.py app/config.py` + ReadLints), —Ä—É—á–Ω–æ–π e2e –∞–Ω—Ç–∏—Å–ø–∞–º–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é

- –î–∞—Ç–∞: 2026-02-19
- –≠—Ç–∞–ø/–ø—É–Ω–∫—Ç: –≠—Ç–∞–ø 3 (BR-09) - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–π –∞–Ω—Ç–∏—Å–ø–∞–º —á–µ—Ä–µ–∑ `.env`
- –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: –ª–∏–º–∏—Ç—ã –∏ –æ–∫–Ω–∞ –∞–Ω—Ç–∏—Å–ø–∞–º–∞ –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ `.env` –ø–æ –¥–µ–π—Å—Ç–≤–∏—è–º (`sale_confirm`, `dispute_open`, `merge_execute`), –¥–æ–±–∞–≤–ª–µ–Ω –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π –≥–ª–æ–±–∞–ª—å–Ω—ã–π cooldown –º–µ–∂–¥—É –Ω–æ–≤—ã–º–∏ —Ñ–∏–∫—Å–∞—Ü–∏—è–º–∏/—Å–ø–æ—Ä–∞–º–∏/—Å–ª–∏—è–Ω–∏—è–º–∏.
- –ö–æ–¥-—Å—Å—ã–ª–∫–∏: `app/config.py`, `.env.example`, `app/handlers/seller.py`, `app/handlers/manager.py`, `README.md`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ (—Ä—É—á–Ω–∞—è/–∞–≤—Ç–æ): –∞–≤—Ç–æ (`python -m compileall app/config.py app/handlers/seller.py app/handlers/manager.py` + ReadLints)

- –î–∞—Ç–∞: 2026-02-19
- –≠—Ç–∞–ø/–ø—É–Ω–∫—Ç: –≠—Ç–∞–ø 4 (BR-10) - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º —Å–ø–æ—Ä–æ–≤
- –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: –ø—Ä–∏ approve/reject –¥–æ–±–∞–≤–ª–µ–Ω—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä—É –∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–º—É —É—á–∞—Å—Ç–Ω–∏–∫—É —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º —Ä–µ—à–µ–Ω–∏—è; –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.
- –ö–æ–¥-—Å—Å—ã–ª–∫–∏: `app/handlers/seller.py`, `app/utils/rate_limit.py`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ (—Ä—É—á–Ω–∞—è/–∞–≤—Ç–æ): –∞–≤—Ç–æ (`python -m compileall app/handlers/seller.py` + ReadLints), —Ä—É—á–Ω–æ–π e2e –ø—É—à–µ–π –ø–æ —Å–ø–æ—Ä–∞–º –æ—Å—Ç–∞–µ—Ç—Å—è –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é

- –î–∞—Ç–∞: 2026-02-19
- –≠—Ç–∞–ø/–ø—É–Ω–∫—Ç: –≠—Ç–∞–ø 5 (BR-11) - ID + –§–ò–û
- –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: –≤ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö user-facing –º–µ—Å—Ç–∞—Ö –∑–∞–º–µ–Ω–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ "—Ç–æ–ª—å–∫–æ ID" –Ω–∞ `–§–ò–û + ID`; –¥–ª—è –ø—É—Å—Ç–æ–≥–æ –∏–º–µ–Ω–∏ –¥–æ–±–∞–≤–ª–µ–Ω fallback `ID N`.
- –ö–æ–¥-—Å—Å—ã–ª–∫–∏: `app/handlers/seller.py`, `app/handlers/manager.py`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ (—Ä—É—á–Ω–∞—è/–∞–≤—Ç–æ): –∞–≤—Ç–æ (`python -m compileall app/handlers/seller.py app/handlers/manager.py` + ReadLints), —Ä—É—á–Ω–æ–π e2e –ø–æ –∫–∞—Ä—Ç–æ—á–∫–∞–º/—Å–ø–æ—Ä–∞–º –æ—Å—Ç–∞–µ—Ç—Å—è –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é

- –î–∞—Ç–∞: 2026-02-19
- –≠—Ç–∞–ø/–ø—É–Ω–∫—Ç: –≠—Ç–∞–ø 6 (BR-12) - –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ–¥–∞–∂ –ø–æ `(–¥–∞—Ç–∞, –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç)`
- –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: —Ñ–∏–∫—Å–∞—Ü–∏—è –∏ –æ—Å–ø–∞—Ä–∏–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –Ω–∞ group-level; –¥–æ–±–∞–≤–ª–µ–Ω—ã –≥—Ä—É–ø–ø–æ–≤—ã–µ —Å–ø–∏—Å–∫–∏/–∫–∞—Ä—Ç–æ—á–∫–∏ –∏ —Å–≤—è–∑—É—é—â–∞—è —Ç–∞–±–ª–∏—Ü–∞ `sale_dispute_claims` –¥–ª—è –≥—Ä—É–ø–ø–æ–≤—ã—Ö —Å–ø–æ—Ä–æ–≤.
- –ö–æ–¥-—Å—Å—ã–ª–∫–∏: `app/db/sqlite.py`, `app/handlers/seller.py`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ (—Ä—É—á–Ω–∞—è/–∞–≤—Ç–æ): –∞–≤—Ç–æ (`python -m compileall app/db/sqlite.py app/handlers/seller.py` + ReadLints), —Ä—É—á–Ω–æ–π e2e –≥—Ä—É–ø–ø–æ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –æ—Å—Ç–∞–µ—Ç—Å—è –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é

- –î–∞—Ç–∞: 2026-02-19
- –≠—Ç–∞–ø/–ø—É–Ω–∫—Ç: –≠—Ç–∞–ø 7 (BR-13) - –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω –∏ —Å—Ç–∏–ª–∏—Å—Ç–∏–∫–∞
- –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: –¥–æ–±–∞–≤–ª–µ–Ω –º–æ—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ –∏ —Ç–æ—á–µ—á–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ç–µ–∫—Å—Ç—ã –≤ –ª–µ–≥–∏–æ–Ω–µ—Ä—Å–∫–æ–π —Å—Ç–∏–ª–∏—Å—Ç–∏–∫–µ –±–µ–∑ –ø–µ—Ä–µ–≥—Ä—É–∑–∞.
- –ö–æ–¥-—Å—Å—ã–ª–∫–∏: `app/handlers/start.py`, `app/handlers/seller.py`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ (—Ä—É—á–Ω–∞—è/–∞–≤—Ç–æ): –∞–≤—Ç–æ (`python -m compileall app/handlers/start.py app/handlers/seller.py` + ReadLints), —Ä—É—á–Ω–∞—è UX-–ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–æ–∫ –æ—Å—Ç–∞–µ—Ç—Å—è –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é

- –î–∞—Ç–∞: 2026-02-19
- –≠—Ç–∞–ø/–ø—É–Ω–∫—Ç: –≠—Ç–∞–ø 8 (—Ñ–∏–Ω–∞–ª—å–Ω–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø—Ä–∏–µ–º–∫–∞ Stage 4)
- –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: –¥–æ–±–∞–≤–ª–µ–Ω –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω smoke-—Å–∫—Ä–∏–ø—Ç Stage 4 (`total=11 failed=0`), —Ä–∞—Å—à–∏—Ä–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –Ω–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –º–µ–Ω—é SELLER/ROP, –∏—Å—Ç–æ—Ä–∏—é Back –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ pre-send delay –≤ support/help; –æ–±–Ω–æ–≤–ª–µ–Ω —Ñ–∏–Ω–∞–ª—å–Ω—ã–π acceptance-–¥–æ–∫.
- –ö–æ–¥-—Å—Å—ã–ª–∫–∏: `scripts/stage8_smoke.py`, `docs/stage8-final-acceptance-2026-02-19.md`, `docs/implementation-checklist4.md`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ (—Ä—É—á–Ω–∞—è/–∞–≤—Ç–æ): –∞–≤—Ç–æ (`python scripts/stage8_smoke.py`, compileall), —Ä—É—á–Ω–æ–π e2e –ø–æ —Ä–æ–ª—è–º –∏ BR-12 –æ—Å—Ç–∞–µ—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º

- –î–∞—Ç–∞: 2026-02-19
- –≠—Ç–∞–ø/–ø—É–Ω–∫—Ç: –ù–æ–≤—ã–π —Å—Ç–µ–∫ –¥–æ—Ä–∞–±–æ—Ç–æ–∫ UX/–Ω–∞–≤–∏–≥–∞—Ü–∏–∏ SELLER/ROP (post-Stage 8)
- –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ: –ø–µ—Ä–µ—Å—Ç—Ä–æ–µ–Ω–æ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é (—Ä–∞–∑–¥–µ–ª—ã `–°–ø–æ—Ä—ã`, `–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –∏ –∫–æ–º–ø–∞–Ω–∏–∏`, `–ü—Ä–æ—Ñ–∏–ª—å`), –ø–æ–º–æ—â—å/–ø—Ä–∞–≤–∏–ª–∞ –æ—Å—Ç–∞–≤–ª–µ–Ω—ã –≤ `–°–∫—Ä–∏–∂–∞–ª—è—Ö`, –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∏—Å—Ç–æ—Ä–∏—è `–ù–∞–∑–∞–¥` –¥–ª—è message+inline —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤, –¥–ª—è stale inline –¥–æ–±–∞–≤–ª–µ–Ω –º—è–≥–∫–∏–π fallback –≤ –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ –º–µ–Ω—é, –≤ support/manager-help —É–±—Ä–∞–Ω pre-send delay –∏ –¥–æ–±–∞–≤–ª–µ–Ω cooldown –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ —á–µ—Ä–µ–∑ env/config.
- –ö–æ–¥-—Å—Å—ã–ª–∫–∏: `app/keyboards/seller.py`, `app/handlers/seller.py`, `app/handlers/filters.py`, `app/handlers/start.py`, `app/config.py`, `.env.example`, `app/utils/nav_history.py`
- –ü—Ä–æ–≤–µ—Ä–∫–∞ (—Ä—É—á–Ω–∞—è/–∞–≤—Ç–æ): –∞–≤—Ç–æ (`python -m compileall ...`, `python scripts/stage8_smoke.py`), —Ä—É—á–Ω–∞—è UX-–ø—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ø–æ—á–µ–∫ Back –∏ live-–∫–ª–∏–∫–æ–≤ –≤ Telegram –æ—Å—Ç–∞–µ—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–π
